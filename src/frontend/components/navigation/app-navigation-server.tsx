import Link from "next/link";
import { redirect } from "next/navigation";
import { checkToken } from "@/lib/auth/check-token";
import { AppNavigationClient } from "./app-navigation-client";
import type { User } from "@/lib/auth/check-token";

/**
 * Server wrapper for navigation menu.
 *
 * Renders the logo on the server (no hydration delay) and wraps
 * the client navigation component. This ensures the logo appears
 * immediately with the initial HTML, while the interactive parts
 * hydrate separately.
 *
 * Resilience: If backend is unreachable but user has a valid token cookie,
 * we still render the navigation in a degraded/offline state. The client
 * component will handle showing the offline indicator and attempt to
 * reconnect via the session context.
 *
 * Note: This component is only rendered in the (pages) layout,
 * so no pathname check is needed - auth pages have their own layout.
 */
export async function AppNavigationServer() {
  // Server-side auth check
  const authResult = await checkToken();

  // If no token exists at all, redirect to login
  if (!authResult.hasToken) {
    redirect("/login");
  }

  // Determine if we're in offline/degraded mode
  // This happens when token exists but backend validation failed due to network
  const isOffline = !authResult.ok && authResult.reason === "network";

  // If auth failed for reasons other than network (invalid/unauthorized), redirect to login
  // This means the token is actually invalid or expired
  if (!authResult.ok && !isOffline) {
    redirect("/login");
  }

  // Create a minimal user object for offline mode
  // The client will use its cached session or fetch fresh data when online
  const offlineUser: User = {
    id: "offline",
    name: "User",
    username: "User",
  };

  // Use actual user if available, otherwise use minimal offline user
  const user = authResult.user || offlineUser;

  // Server-rendered header with logo + client navigation
  return (
    <header className="shrink-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60">
      <nav className="flex h-14 items-center px-4 max-w-screen-2xl mx-auto w-full">
        {/* Logo - Inline Base64 to prevent flash during page load */}
        <Link href="/" className="shrink-0 me-6 flex items-center">
          {/* eslint-disable-next-line @next/next/no-img-element -- Using inline base64 data, Next Image not applicable */}
          <img
            src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAmwAAAB4CAYAAABPTa6BAAAACXBIWXMAAAsTAAALEwEAmpwYAAAHBWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDIgNzkuMTY0NDYwLCAyMDIwLzA1LzEyLTE2OjA0OjE3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMiAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIzLTA1LTEwVDE0OjM3OjQ3KzAzOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMy0wNS0xMFQxNDozODowMyswMzowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMy0wNS0xMFQxNDozODowMyswMzowMCIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmMxZGI3ZDQzLTcyZjMtOTg0MC1hNGJjLTQzMDMwODViY2RkNCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0MWMxMWM5NC1jOWNlLTIzNGQtOTFiNy00MmQwYTRkYTdiYmMiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjM0OGVkMzVhLTQzZjAtZGE0Yi05N2FlLTI0ZjU1Mzk1NWMyMSIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YmU2Njk0ODMtNDE4OC05OTRmLThlMTgtODIyZGExZTU4ODc4IiBzdEV2dDp3aGVuPSIyMDIzLTA1LTEwVDE0OjM3OjQ3KzAzOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjEuMiAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NDFjMTFjOTQtYzljZS0yMzRkLTkxYjctNDJkMGE0ZGE3YmJjIiBzdEV2dDp3aGVuPSIyMDIzLTA1LTEwVDE0OjM4OjAzKzAzOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjEuMiAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDxyZGY6QmFnPiA8cmRmOmxpPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDozNDhlZDM1YS00M2YwLWRhNGItOTdhZS0yNGY1NTM5NTVjMjE8L3JkZjpsaT4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPC9y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"
            alt=""
            width={165}
            height={32}
            style={{ objectFit: "contain" }}
          />
        </Link>

        {/* Client navigation content (menus, user controls, etc.) */}
        <AppNavigationClient initialUser={user} initialOffline={isOffline} />
      </nav>
    </header>
  );
}
